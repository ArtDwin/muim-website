<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MUIM Galaxy Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    /* (CSS remains unchanged - preserved as in your original full design) */
  </style>
</head>
<body>
  <!-- HTML structure remains the same -->  <script>
    function showSection(sectionName) {
      document.getElementById('home-section').style.display = 'flex';
      document.getElementById('chat-section').classList.remove('active');
      document.getElementById('features-section').classList.remove('active');
      if (sectionName === 'home') {
        document.getElementById('home-section').style.display = 'flex';
      } else if (sectionName === 'chat') {
        document.getElementById('home-section').style.display = 'none';
        document.getElementById('chat-section').classList.add('active');
        document.getElementById('userInput').focus();
      } else if (sectionName === 'features') {
        document.getElementById('home-section').style.display = 'none';
        document.getElementById('features-section').classList.add('active');
      }
    }

    async function connectWallet() {
      const status = document.getElementById('walletStatus');
      try {
        if (!window.ethereum) throw new Error("MetaMask not installed");
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        const acc = accounts[0];
        status.innerHTML = `<span style="color:#00ff88;">‚úÖ Connected: ${acc.slice(0,6)}...${acc.slice(-4)}</span>`;
      } catch (e) {
        status.innerHTML = `<span style="color:#ff6b6b;">‚ùå Error: ${e.message}</span>`;
      }
    }

    function sendMessage() {
      const userInput = document.getElementById('userInput');
      const chatMessages = document.getElementById('chatMessages');
      const userText = userInput.value.trim();
      if (!userText) return;

      const userMessage = document.createElement('div');
      userMessage.className = 'message user';
      userMessage.innerHTML = `<strong>You:</strong> ${userText}`;
      chatMessages.appendChild(userMessage);
      userInput.value = '';
      chatMessages.scrollTop = chatMessages.scrollHeight;

      fetch("http://192.168.1.12:7070/ask", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: userText })
      })
      .then(res => res.json())
      .then(data => {
        const aiMessage = document.createElement('div');
        aiMessage.className = 'message ai';
        aiMessage.innerHTML = `<strong>AI:</strong> ${data.answer}`;
        chatMessages.appendChild(aiMessage);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      })
      .catch(error => {
        const errorMessage = document.createElement('div');
        errorMessage.className = 'message ai';
        errorMessage.innerHTML = `<strong>AI:</strong> Error: ${error.message}`;
        chatMessages.appendChild(errorMessage);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      });
    }

    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function startSpec() {
      alert('üöÄ SPEC GATE Protocol Booting...\n\n‚ö° Quantum trading algorithms initializing\nüåå Connecting to galaxy-wide markets\nüß† AI analysis engine activated\n\n(Backend integration pending)');
    }

    if (typeof lottie !== 'undefined') {
      lottie.loadAnimation({
        container: document.getElementById('ai-avatar'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        path: 'https://assets1.lottiefiles.com/packages/lf20_hz6h0huo.json'
      });
    }

    if (typeof THREE !== 'undefined') {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ 
        canvas: document.getElementById("bgCanvas"), 
        alpha: true 
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.position.z = 1;
      const geometry = new THREE.BufferGeometry();
      const stars = 10000;
      const positions = [];
      for (let i = 0; i < stars; i++) {
        positions.push((Math.random() - 0.5) * 2000);
        positions.push((Math.random() - 0.5) * 2000);
        positions.push(-Math.random() * 2000);
      }
      geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
      const material = new THREE.PointsMaterial({ color: 0xffffff, size: 1 });
      const starField = new THREE.Points(geometry, material);
      scene.add(starField);
      function animate() {
        requestAnimationFrame(animate);
        starField.rotation.y += 0.0005;
        starField.rotation.x += 0.0002;
        renderer.render(scene, camera);
      }
      animate();
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    }

    showSection('home');
  </script></body>
</html>