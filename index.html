<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MUIM Galaxy Portal ‚Äì Quantum Oracle</title>

  <!-- Google Fonts & Lottie/Three for starfield -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <style>
    /* --- your existing CSS --- */
    :root {
      --primary-cyan: #00ffff;
      --primary-magenta: #ff00ff;
      --primary-purple: #8b5cf6;
      --dark-bg: #0a0a0f;
      --glass-bg: rgba(255,255,255,0.05);
      --glass-border: rgba(255,255,255,0.1);
      --gradient-1: linear-gradient(135deg,#00ffff,#8b5cf6);
      --gradient-2: linear-gradient(135deg,#ff00ff,#00ffff);
      --consciousness-gradient: linear-gradient(135deg,#00ffff 0%,#ff00ff 25%,#8b5cf6 50%,#ffd700 75%,#00ff88 100%);
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Space Grotesk',sans-serif;
      background:var(--dark-bg);
      color:white;
      overflow-x:hidden;
    }
    header {
      position:fixed; top:0; width:100%; z-index:1000;
      background:rgba(10,10,15,0.95); backdrop-filter:blur(20px);
      border-bottom:1px solid var(--glass-border);
      padding:1rem;
    }
    .nav { max-width:1200px; margin:auto; display:flex; justify-content:space-between; align-items:center; }
    .logo {
      font-family:'Orbitron',monospace; font-size:2rem; font-weight:900;
      background:var(--consciousness-gradient);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      animation:logo-flow 4s ease-in-out infinite;
      background-size:200% 200%;
    }
    @keyframes logo-flow {
      0%,100%{background-position:0% 50%}50%{background-position:100% 50%}
    }
    .nav-links { display:flex; gap:1.5rem; list-style:none; }
    .nav-links a {
      color:white; text-decoration:none; font-weight:500;
      padding:0.5rem 1rem; border-radius:8px; transition:0.3s;
    }
    .nav-links a:hover {
      color:var(--primary-cyan); background:var(--glass-bg); transform:translateY(-2px);
    }
    @media (max-width:768px){ .nav-links{display:none} }
    .starfield { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; }
    .hero {
      min-height:100vh; padding:8rem 2rem 4rem; text-align:center;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      background:radial-gradient(ellipse at center, rgba(0,255,255,0.1) 0%,transparent 70%);
    }
    .hero h1 {
      font-family:'Orbitron',monospace; font-size:3.5rem; font-weight:900;
      background:var(--consciousness-gradient);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      animation:title-flow 3s ease-in-out infinite; background-size:200% 200%;
      margin-bottom:1rem;
    }
    @keyframes title-flow {
      0%,100%{background-position:0% 50%}50%{background-position:100% 50%}
    }
    .hero-subtitle { font-size:1.4rem; color:#ccc; max-width:700px; line-height:1.6; margin-bottom:2rem; }
    .highlight-word { font-weight:800; text-transform:uppercase; letter-spacing:1px; }
    .highlight-word.cyan { color:var(--primary-cyan); text-shadow:0 0 15px rgba(0,255,255,0.5); }
    .highlight-word.magenta { color:var(--primary-magenta); text-shadow:0 0 15px rgba(255,0,255,0.5); }
    .highlight-word.purple { color:var(--primary-purple); text-shadow:0 0 15px rgba(139,92,246,0.5); }
    .highlight-word.gradient {
      background:var(--consciousness-gradient);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      text-shadow:none;
    }
    #ai-avatar {
      width:240px; height:240px; border-radius:50%; margin:2rem 0;
      background:var(--consciousness-gradient);
      display:flex; align-items:center; justify-content:center; font-size:4rem;
      cursor:pointer; animation:avatar-consciousness 3s infinite ease-in-out;
      box-shadow:0 0 40px rgba(0,255,255,0.5); transition:0.4s; position:relative; overflow:hidden;
    }
    /* ... rest of your styles (buttons, features, footer, chat overlay, etc) ... */
  </style>
</head>
<body>
  <!-- starfield -->
  <div class="starfield"><canvas id="bgCanvas"></canvas></div>

  <!-- header/nav -->
  <header>
    <div class="nav">
      <div class="logo">üß¨ MUIM CONSCIOUSNESS</div>
      <ul class="nav-links">
        <li><a href="#" onclick="showSection('home')">Home</a></li>
        <li><a href="#" onclick="openChat()">AI Oracle</a></li>
        <li><a href="#" onclick="showSection('features')">Features</a></li>
        <li><a href="#" onclick="showSection('contact')">Contact</a></li>
      </ul>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero" id="home-section">
      <h1>MUIM Quantum Consciousness Portal</h1>
      <p class="hero-subtitle">
        <span class="highlight-word cyan">Connect</span>,
        <span class="highlight-word magenta">explore</span>, and
        <span class="highlight-word purple">evolve</span> in the next generation of
        <span class="highlight-word cyan">Web3</span> powered by
        <span class="highlight-word gradient">Quantum AI Intelligence</span>.
      </p>

      <div id="ai-avatar" onclick="openChat()">üß¨</div>

      <div class="btn-group">
        <button class="btn btn-primary" onclick="connectWallet()">üîê Connect Quantum Wallet</button>
        <button class="btn btn-primary" onclick="openChat()">üß† Enter Consciousness Matrix</button>
        <button class="btn btn-secondary" onclick="startSpec()">üíπ Launch SPEC Trading</button>
        <button class="btn btn-secondary" onclick="showSection('features')">‚ú® Explore Quantum Features</button>
      </div>

      <div class="wallet-status" id="walletStatus">üî¥ Wallet Not Connected</div>
    </section>

    <!-- Features -->
    <section class="features-section" id="features-section">
      <!-- ... your features cards ... -->
    </section>

    <!-- MUIM Coin Explanation -->
    <section id="muim-coin-explained">
      <!-- ... your MUIM coin content ... -->
    </section>
  </main>

  <!-- Chat Overlay -->
  <div class="chat-overlay" id="chatOverlay">
    <div class="chat-container">
      <div class="chat-header">
        <div class="chat-title">üß† MUIM Quantum Oracle</div>
        <button class="close-chat" onclick="closeChat()">√ó</button>
      </div>
      <div class="chat-messages" id="chatMessages"></div>
      <div class="chat-input-area">
        <div class="input-wrapper">
          <textarea class="chat-input" id="chatInput" placeholder="Ask MUIM Oracle..."></textarea>
          <button class="send-button" id="chatSend">Send</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <!-- ... your footer sections ... -->
  </footer>

  <script>
    // 1) Section toggles
    function showSection(id) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      if (id === 'home') {
        document.getElementById('home-section').scrollIntoView({ behavior: 'smooth' });
      } else if (id === 'features') {
        document.getElementById('features-section').classList.add('active');
        document.getElementById('features-section').scrollIntoView({ behavior: 'smooth' });
      }
    }

    // 2) Wallet & SPEC stubs
    function connectWallet() {
      alert('üîê Wallet connection coming soon!');
      document.getElementById('walletStatus').innerText = 'üü¢ Wallet Connected';
    }
    function startSpec() {
      alert('üöÄ SPEC Trading launch coming soon!');
    }

    // 3) Chat overlay control
    const overlay = document.getElementById('chatOverlay');
    function openChat() {
      overlay.classList.add('active');
      initChat();
    }
    function closeChat() {
      overlay.classList.remove('active');
    }

    // 4) Chat logic with fallback (HEMOS)
    let isTyping = false;
    async function fetchWithFallback(urls, options) {
      for (const url of urls) {
        try {
          const res = await fetch(url, options);
          if (res.ok) return res;
        } catch (e) {}
      }
      throw new Error('All endpoints failed');
    }

    function addMessage(text, sender = 'ai') {
      const container = document.getElementById('chatMessages');
      const msg = document.createElement('div');
      msg.className = `message ${sender}`;
      const avatar = document.createElement('div');
      avatar.className = 'message-avatar ' + sender;
      avatar.innerText = sender === 'user' ? 'üë§' : 'üß†';
      const content = document.createElement('div');
      content.className = 'message-content';
      content.innerText = text;
      msg.appendChild(avatar);
      msg.appendChild(content);
      container.appendChild(msg);
      container.scrollTop = container.scrollHeight;
    }

    function addTyping() {
      const container = document.getElementById('chatMessages');
      const indicator = document.createElement('div');
      indicator.id = 'typingIndicator';
      indicator.className = 'typing-indicator';
      indicator.innerHTML = `
        <div class="typing-dots">
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>`;
      container.appendChild(indicator);
      container.scrollTop = container.scrollHeight;
    }
    function removeTyping() {
      document.getElementById('typingIndicator')?.remove();
    }

    async function sendChat() {
      if (isTyping) return;
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      if (!text) return;

      addMessage(text, 'user');
      input.value = '';
      addTyping();
      isTyping = true;

      // **FALLBACK URLS**: local Termux / LAN then Render
      const urls = [
        'http://192.168.1.12:7070/ask',             // your Termux Flask (LAN)
        'https://muim-website.onrender.com/ask'      // your Render service
      ];
      const opts = {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify({ question: text })
      };

      try {
        const res = await fetchWithFallback(urls, opts);
        const data = await res.json();
        removeTyping();
        addMessage(data.answer || 'No reply.', 'ai');
      } catch (e) {
        removeTyping();
        addMessage('‚ö†Ô∏è Error contacting Oracle.', 'ai');
      } finally {
        isTyping = false;
      }
    }

    function initChat() {
      document.getElementById('chatMessages').innerHTML = '';
      addMessage('Welcome to MUIM Quantum Oracle!', 'ai');
    }

    document.getElementById('chatSend').onclick = sendChat;
    document.getElementById('chatInput').addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendChat();
      }
    });
  </script>
</body>
</html>